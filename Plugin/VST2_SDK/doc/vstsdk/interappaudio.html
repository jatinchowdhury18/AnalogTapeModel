<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VST 3 SDK: iOS Inter-App Audio support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxysmtg.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="interappaudio">iOS Inter-App Audio support </a></h1><h2><a class="anchor" id="iaa_introduction">
Introduction</a></h2>
<p>The VST 3 SDK provides an easy way to create an iOS InterApp-Audio Application out of your VST 3 Plug-in.</p>
<p>The SDK comes with an iOS VST 3 host application that can run standalone or as an Inter-App Audio slave. If your plug-in does not use any specific Windows or Mac OS X API's, it should be reasonably easy to get your plug-in running on iOS.</p>
<p>If you use VSTGUI4 with the VST3Editor class as your UI, you mainly only have to create a new UI description for the different device sizes.</p>
<h2><a class="anchor" id="iaa_howto">
How-To :</a></h2>
<h3><a class="anchor" id="iaa_howto1">
Create and Setup the Xcode Project</a></h3>
<ul>
<li>Create a new iOS Application in Xcode. Use the "Empty Application" Template.</li>
<li>Use "C++11" as "C++ Language Dialect".</li>
<li>Activate "Objective-C Automatic Reference Counting".</li>
<li>Change the Bundle Identifier according to your registered AppID at Apple (see the Apple Documentation).</li>
<li>Activate the "Inter-App Audio" capability for the project.</li>
<li>Activate the "Background Modes" capability for the project and check the "Audio and Airplay" mode.</li>
<li>Change the "Header Search Path" configuration to add a path to the root of the VST 3 SDK.</li>
</ul>
<h3><a class="anchor" id="iaa_howto2">
Add your Audio Component description to the Info.plist</a></h3>
<ul>
<li>Add a new Array with the name "AudioComponents".</li>
<li>Add a new Dictionary to the array.</li>
<li>Add the following keys to the dictionary: manufacturer, name, type, subtype, version.</li>
<li>Set the values of these keys:</li>
<li>The manufacturer value must be the one registered with Apple (the one you use for AudioUnits).</li>
<li>The type value must be either 'aurx' (Effect), 'aurm' (Effect with MIDI), 'aurg' (Generator) or 'auri' (Instrument).</li>
<li>The version value must be 1.</li>
</ul>
<h3><a class="anchor" id="iaa_howto3">
Add files to the project</a></h3>
<ul>
<li>all the sources from your VST 3 Plug-in project</li>
<li>all files from public.sdk/source/vst/interappaudio/</li>
<li>all files from public.sdk/source/vst/hosting</li>
<li>all files from base/source/ (if not already done previously)</li>
<li>public.sdk/source/vst/auwrapper/NSDataIBStream.mm (if not already done previously)</li>
</ul>
<h3><a class="anchor" id="iaa_howto4">
If using vstgui</a></h3>
<ul>
<li>add vstgui_ios.mm</li>
<li>add vstgui_uidescription_ios.mm</li>
</ul>
<h2><a class="anchor" id="iaa_codechanges">
Code changes:</a></h2>
<p>Xcode created some files for you when you created the project. One of it is the App Delegate. You need to change the base class from NSResponder&lt;UIApplicationDelegate&gt; to <a class="el" href="interfaceVSTInterAppAudioAppDelegateBase.html" title="Base UIApplicationDelegate class.">VSTInterAppAudioAppDelegateBase</a> (you need to import its header file which is here : public.sdk/source/vst/interappaudio/VSTInterAppAudioAppDelegateBase.h) and then remove all methods from it. If you want to add some custom behavior to your app, you should do it in your App Delegate class implementation. Per example, if you want to only allow landscape mode, you have to add this method: </p>
<div class="fragment"><pre class="fragment">- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
  <span class="keywordflow">return</span> UIInterfaceOrientationMaskLandscapeLeft|UIInterfaceOrientationMaskLandscapeRight;
}
</pre></div><p> Make sure to call the super method if you override one of the methods implemented by <a class="el" href="interfaceVSTInterAppAudioAppDelegateBase.html" title="Base UIApplicationDelegate class.">VSTInterAppAudioAppDelegateBase</a> (see the header which one are implemented).</p>
<h2><a class="anchor" id="iaa_editor">
Creating a different UI when running on iOS</a></h2>
<p>To create a different view for iOS, you can check the host context for the IInterAppAudioWrapper interface: </p>
<div class="fragment"><pre class="fragment"><span class="comment">//-----------------------------------------------------------------------------</span>
IPlugView* PLUGIN_API MyEditController::createView (<a class="codeRef" doxygen="base.tag:../base/" href="../base/namespaceSteinberg.html#ad4c02134d1ee42389f3d94717935a1d5">FIDString</a> _name)
{
  ConstString name (_name);
  <span class="keywordflow">if</span> (name == ViewType::kEditor)
  {
    FUnknownPtr&lt;IInterAppAudioHost&gt; interAudioApp (getHostContext ());
    <span class="keywordflow">if</span> (interAudioApp)
    {
      <span class="comment">// create and return the view for iOS</span>
    }
    <span class="keywordflow">else</span>
    {
      <span class="comment">// create and return the view for Windows/MacOSX</span>
    }
  }
  <span class="keywordflow">return</span> 0;
}
</pre></div><h2><a class="anchor" id="iaa_ui_vstgui">
Using VSTGUI</a></h2>
<p>VSTGUI 4.2 includes support for iOS. You can use it the same like you use it for Windows or Mac OS X. See the VSTGUI documentation for some limitations.</p>
<h2><a class="anchor" id="iaa_ui_native">
Using a native UIView</a></h2>
<p>If you want to create a native UIView as your plug-in editor, you have to create your own IPlugView derivate and attach the UIView in the IPlugView::attached method. An example of this can be seen in public.sdk/samples/vst/adelay/interappaudio/iosEditor.mm</p>
<h2><a class="anchor" id="iaa_host_ui">
Host UI Integration</a></h2>
<p>The example project in public.sdk/samples/vst/InterAppAudio uses a custom solution to show the UI for controlling and switching to the host application. You should take this as an example if you want to add it this way. You can also use the UI Apple provides with the its example source for Inter-App Audio.</p>
<p>But you can also implement the host UI integration into your plug-in view. Your edit controller will get an interface to IInterAppAudioHost via its initialize method which you can use to get the host icon and send commands or switch to the host. If you use this method to show the host controls you should implement the IInterAppAudioConnectionNotification interface in your edit controller to conditionally show or hide the controls depending on the connection state. </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<html>

<head>
	<title>Empty</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<meta name="Author" content="mario">
</head>

<body>

<br/>
<hr width="100%" size="2" align="left" />
<div align=left>
Copyright &copy;2015 <a href="http://www.steinberg.net" target="_blank"><u>Steinberg Media Technologies GmbH</u></a>.
All Rights Reserved.
</div>
</body>

</html>
